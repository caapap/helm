{{- if eq .Values.n9e.type "internal" -}}
apiVersion: v1
kind: Service
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.7.0 (HEAD)
  creationTimestamp: null
  labels:
    app: ibex
    app.kubernetes.io/managed-by: Helm
    app.kubesphere.io/instance: ibex
    chart: ibex
    component: center
    heritage: Helm
    release: ibex
  name: "{{ template "nightingale.ibex" . }}"
spec:
  ports:
  - name: "10090"
    port: 10090
    targetPort: 10090
    nodePort: {{ .Values.ibex.nodePorts.nodePortA }}
  - name: "20090"
    port: 20090
    targetPort: 20090
    nodePort: {{ .Values.ibex.nodePorts.nodePortB }}
  selector:
    app: ibex
    app.kubesphere.io/instance: ibex
    release: ibex
  type: NodePort
  sessionAffinity: None
{{- end -}}